# IPC (Inter Process Communication)
정의
<br>
<br>
프로세스들끼리 서로 데이터를 주고받는 행위 또는 그에 대한 방법을 뜻한다.
<br>
<br>
프로세스는 완전히 독립된 실행객체
<br>
서로 독립되어 있다는 것은 다른 프로세스의 영향을 받지 않는다는 장점이 있다.
<br>
하지만 독립되어 있기 때문에 상호간의 통신이 어렵다는 문제가 있게 된다.
<br>
<br>

### IPC의 종류

#### 공유 메모리 
프로세스간 메모리 영역을 공유해서 데이터 자체를 공유하여 사용할 수 있도록 허용
<br>
프로세스가 공유 메모리 할당을 커널에 요청하면 커널은 해당 프로세스에 메모리 공간을 할당
<br>
이후에 어떤 프로세스건 해당 메모리 영역에 접근할 수 있다.
<br><br>
공유 메모리가 설정되면, 그 이후의 통신은 커널의 관여 없이 진행 가능하다.
<br><br>
공유한 메모리 영역에 읽기/쓰기를 통해 통신을 수행한다.
<br><br>

#### 장점
- 중개자 없이 곧바로 메모리에 접근할 수 있기 때문에 모든 IPC 중에서 가장 빠르게 작동할 수 있다.

#### 단점
- 메시지 전달 방식이 아니기 때문에 데이터를 언제 읽어야 하는지 알 수 없다.
- 동시에 같은 메모리 위치를 접근하는 경우가 발생할 수 있기 때문에 공유 메모리에 접근할 프로세스 간의 Lock 메커니즘이 필요하다.
- 커널에 종속적이기 때문에 사용하기 전에 커널에서 사용하고 있는 공유 메모리 사이즈를 확인해야 한다.

<br>
<br>

#### 파이프
통신을 위한 메모리 공간(버퍼)을 생성하여 프로세스가 데이터를 주고 받게끔 한다.

- #### 익명 파이프
    통신할 프로세스를 명확하게 알 수 있는 경우 사용
    - 부모 - 자식 OR 형제 프로세스 간 통신
    - 외부 프로세스에서 사용할 수 없다.
    <br>
    <br>

    1 대 1 통신
    <br>
    <br>
    한 쪽의 프로세스는 데이터 쓰기만, 다른 쪽은 데이터를 읽기만 할 수 있다.
    - 한쪽 방향으로만 통신이 가능하기 때문에 반이중( half - Duplex ) 통신이라고 부르기도 한다.
    <br>
    <br>

    스트림 기반으로 작동한다.
    <br>
    <br>
    용량에 제한이 있기 때문에 파이프에 가득 차면 더 이상 쓸 수 없다.
    <br>
    <br>
    단점
    - 데이터를 송/수신 하기 위해선 파이프를 두 개 만들어야 한다.
        - 낭비가 심하기 때문에 좋은 선택은 아니다.
    <br>

- #### 네임드 파이프
  전혀 모르는 상태의 프로세스들 사이의 통신에 사용
  <br>
  <br>
  익명 파이프의 확장된 상태로 전혀 무관한 프로세스와 통신이 가능하다.
  - 프로세스 통신을 위해서 이름이 있는 파일을 사용하기 때문에 가능하다.
  - FIFO (동작 방식 때문에 FIFO 라 불림)라 불리는 특수 파일을 이용해 서로 관련 없는 프로세스간 통신에 사용한다.
  <br>
  <br>
  단점
  - 익명 파이프에서 확장된 것이 네임드 파이프이기 때문에 반이중 통신인 것은 똑같다.
    - 즉 전이중 통신을 위해선 파이프를 2개 만들어야 한다.

<br>

#### 소켓 (Socket)
같은 시스템 내의 프로세스 간 혹은 다른 시스템에 있는 프로세스 간 데이터를 교환하기 위한 데이터 통신(네트워크) 엔드 포인트.
<br>
<br>
TCP/IP 와 UDP 프로토콜을 활용한 통신 방식
<br>

네트워크 소켓 통신을 통해 데이터를 공유한다.
- 양쪽 PC 에서 각각의 프로세스가 각자 포트를 정하고 포트 간의 통신을 통해 데이터를 주고받는 방식.
- 한 포트에 하나의 프로세스만 할당할 수 있다.
- 연결 명령을 보내면 두 프로세스는 서로 확인과정을 거쳐 연결을 진행하고 연결 후엔 PIPE와 같이 1 대 1 로 데이터를 주고 받는 형식

<br>
클라이언트와 서버가 소켓을 통해 통신하는 구조로 원격에서 프로세스 간 데이터를 공유할 수 있다.

<br>

전이중 통신이 가능하다.

<br>

#### 메시지 큐 (Message Queue)

메시지 ( 패킷 ) 단위로 작동
<br>

메시지 큐는 파이프처럼 데이터의 흐름이 아니라 메모리 공간이다.
<br>
PIPE나 FIFO와 달리, 다수의 프로세스 간 메시지를 전달할 수 있다.
<br>

사용할 데이터에 번호를 붙이면서 여러 프로세스가 동시에 데이터를 쉽게 다룰 수 있다.
<br>
메시지 접근을 위해서는 키(key)가 필요하다.
<br>

메시지 큐는 양방향 통신이 가능하다.

<br>

#### 메모리 맵 (Memory Map)
공유 메모리 처럼 메모리를 공유해준다.
<br>

메모리 맵은 열린 파일을 메모리에 맵핑시켜서 공유하는 방식이다.
즉 공유의 매개체는 파일과 메모리이다.
<br>

주로 파일로 대용량 데이터를 공유해야 할 때 사용한다.
<br>

대부분 운영체제는 프로세스를 실행할 때 실행 파일의 각 세그먼트를 메모리에 사상하기 위해서 메모리 맵 파일을 이용한다.
<br>

메모리 맵 파일은 파일의 크기를 바꿀 수는 없으며 메모리 맵 파일을 사용하기 이전, 또는 이후에만 파일의 크기를 바꿀 수 있다.



<br>
<br>
reference
<br>
https://velog.io/@nnnyeong/OS-IPC-Inter-Process-Communication
<br>
https://dar0m.tistory.com/233
<br>
https://velog.io/@palinyee12/%EB%A6%AC%EB%88%85%EC%8A%A4-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-IPC-Socket-%ED%86%B5%EC%8B%A0-%EB%8B%A4%EB%A3%A8%EA%B8%B0